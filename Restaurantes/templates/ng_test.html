<!doctype html>
<html class="no-js" lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Plantilla base aplicación Restaurantes">
    <meta name="author" content="Germán Martínez Maldonado">
    <title>Restaurantes - Aplicación sobre restaurantes</title>

    {% load staticfiles %}
    <link href="{% static 'css/vendors/foundation.min.css' %}" rel="stylesheet">
    <script src="{% static 'js/vendors/angular.min.js' %}"></script>

    <script type="text/javascript">
        var myApp = angular.module('myApp', []);

        myApp.controller('MyController', ['$scope', function($scope) {
            $scope.greeting = 'Hi!';
            $scope.double = function(k) {
                return k * 2;
            };
            $scope.putPi = function() {
                $scope.number = 3.14;
            };
        }]);

        myApp.controller('Restaurantes', function($scope, $http) {
            $http.get("/app/api/restaurantes?format=json").then(function(response) {
                $scope.restaurantes = response.data;
            }, function(e) {
                alert("Se ha producido un error.");
            });
        });
    </script>
</head>

<body ng-app="myApp">
    {% verbatim %}
    <div ng-app ng-init="esto=Nada">
        <input ng-model="esto" />
        <br> Esto = <i>{{ esto }}</i>
    </div>

    <div ng-init="qty=1; cost=2">
        <b>Invoice:</b>
        <div>
            Quantity:
            <input type="number" min="0" ng-model="qty">
        </div>
        <div>
            Costs:
            <input type="number" min="0" ng-model="cost">
        </div>
        <div>
            <b>Total:</b> {{qty * cost | currency}}
        </div>
    </div>

    <div ng-controller="MyController" ng-init="number=2">
        <div>
            Quantity:
            <input type="number" min="0" ng-model="number"> {{ double(number) }}
        </div>
        <button ng-click="putPi()">Pi</button>
    </div>

    <div ng-controller="Restaurantes">
        <b>Restaurantes: </b>
        <table>
            <tr>
                <td><b>Nombre</b></td>
                <td><b>Dirección</b></td>
                <td><b>Votos</b></td>
            </tr>
            <tr ng-repeat="r in restaurantes">
                <td>{{ r.nombre }}</td>
                <td>{{ r.direccion }}</td>
                <td>({{ r.votos }})</td>
            </tr>
        </table>
    </div>

    {% endverbatim %}

</html>
</body>
